{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/bar/bar_chart.ts","src/charts.ts","src/legend/interactive_legend.ts","src/line/line_chart.ts","src/pie/pie_chart.ts","temp/pip-webui-charts-html.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","pip","charts","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","pipBarChart","restrict","scope","series","xTickFormat","yTickFormat","interactiveLegend","bindToController","controllerAs","templateUrl","controller","$element","$scope","$timeout","$interval","$mdColorPalette","prepareData","data","result","_","each","seria","disabled","values","push","cloneDeep","drawEmptyState","find","d3","select","remove","chartElem","append","classed","width","innerWidth","margin","style","attr","height","configBarWidthAndLabel","timeout","labels","chartBars","getBBox","index","item","barHeight","Number","barWidth","element","x","transform","translate","y","transition","duration","materialColorToRgba","color","value","getMaterialColor","colors","generateParameterColor","vm","forEach","chart","map","palette","filter","isObject","isArray","legend","clone","slice","scale","paletteColors","ordinal","range","$watch","updatedSeries","datum","updatedLegend","nv","addGraph","models","discreteBarChart","top","right","bottom","left","d","label","key","showValues","staggerLabels","showXAxis","showYAxis","valueFormat","format","tooltip","enabled","noData","yAxis","tickFormat","xAxis","get","utils","windowResize","update","angular","directive","pipChartLegend","interactive","colorCheckboxes","checkboxContainers","$","css","animate","legendTitles","addClass","prepareSeries","hex","undefined","newValue","oldValue","pipLineChart","xFormat","xTickValues","dynamic","fixedHeight","dynamicHeight","minHeight","maxHeight","onResize","getHeight","containerWidth","containerHeight","innerHeight","updateScroll","domains","boundary","bDiff","domDiff","isEqual","addZoom","svg","setData","newChart","xDomain","domain","yDomain","redraw","xScale","yScale","x_boundary","y_boundary","prevXDomain","prevScale","d3zoom","prevTranslate","nice","fixDomain","updateChart","zoomed","event","unzoomed","step","which","coordinates","point","keypress","keyCode","setZoom","scaleExtent","behavior","zoom","center0","translate0","coordinates0","center1","on","getXMinMax","maxVal","minVal","tempMinVal","max","tempMaxVal","min","updateZoomOptions","filteredColor","sourceEvents","isVisibleX","isVisibleY","zoomIn","zoomOut","tickValues","$on","setTimeout","selectAll","heigth","Math","parent","lineChart","useInteractiveGuideline","showLegend","tooltipW","bodyWidth","originalEvent","removeTooltip","pipPieChart","donut","total","size","centered","pie","layout","sort","arc","innerRadius","outerRadius","enter","centerChart","svgElem","leftMargin","renderTotalLabel","totalVal","reduce","sum","curr","toFixed","text","titleElem","resizeTitleLabelUnwrap","boxSize","resizeTitleLabel","newVal","pieChart","showLabels","labelThreshold","growOnHover","donutRatio","run","$templateCache","put"],"mappings":"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","file":"pip-webui-charts.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function () {\n    'use strict';\n\n    /**\n     * @ngdoc module\n     * @name pipBarCharts\n     *\n     * @description\n     * Bar chart on top of Rickshaw charts\n     */\n    angular.module('pipBarCharts', [])\n        .directive('pipBarChart', pipBarChart);\n\n    function pipBarChart() {\n        return {\n            restrict: 'E',\n            scope: {\n                series: '=pipSeries',\n                xTickFormat: '=pipXTickFormat',\n                yTickFormat: '=pipYTickFormat',\n                interactiveLegend: '=pipInterLegend'\n            },\n            bindToController: true,\n            controllerAs: 'barChart',\n            templateUrl: 'bar/bar_chart.html',\n            controller: function ($element, $scope, $timeout, $interval, $mdColorPalette) {\n                let vm = this;\n                let chart = null;\n                let chartElem = null;\n                let colors = _.map($mdColorPalette, function (palette, color) {\n                    return color;\n                });\n                colors = _.filter(colors, function(color){\n                    return _.isObject($mdColorPalette[color]) && _.isObject($mdColorPalette[color][500] && _.isArray($mdColorPalette[color][500].value));\n                });                \n                let height = 270;\n\n                vm.data = prepareData(vm.series) || [];\n                vm.legend = _.clone(vm.series);\n                \n                if ((vm.series || []).length > colors.length) {\n                    vm.data = vm.series.slice(0, 9);\n                }\n\n                generateParameterColor();\n\n                (<any>d3.scale).paletteColors = function () {\n                    return d3.scale.ordinal().range(colors.map(materialColorToRgba));\n                };\n\n                $scope.$watch('barChart.series', function (updatedSeries) {\n                    vm.data = prepareData(updatedSeries);\n                    vm.legend = _.clone(vm.series);\n                    generateParameterColor();\n\n                    if (chart) {\n                        chartElem.datum(vm.data).call(chart);\n                        configBarWidthAndLabel();\n                        drawEmptyState();\n                    }\n                });\n\n                $scope.$watch('barChart.legend', function(updatedLegend) {\n                    vm.data = prepareData(updatedLegend);\n                    vm.legend = updatedLegend;\n\n                    if (chart) {\n                        chartElem.datum(vm.data).call(chart);\n                        configBarWidthAndLabel();\n                        drawEmptyState();\n                    }\n                }, true);\n\n                function prepareData(data) {\n                    let result = [];\n                    _.each(data, (seria) => {\n                        if (!seria.disabled && seria.values) result.push(seria);\n                    });\n\n                    return _.cloneDeep(result);\n                }\n\n                /**\n                 * Instantiate chart\n                 */\n                nv.addGraph(function () {\n                    chart = nv.models.discreteBarChart()\n                        .margin({top: 10, right: 0, bottom: 10, left: 50})\n                        .x(function (d) { return d.label || d.key || d.x; })\n                        .y(function (d) { return d.value; })\n                        .showValues(true)\n                        .staggerLabels(true) \n                        .showXAxis(true)\n                        .showYAxis(true)\n                        .valueFormat(<any>d3.format('d'))\n                        .duration(0)\n                        .height(height)\n                        .color(function(d) {\n                            return vm.data[d.series].color || materialColorToRgba(colors[d.series]);\n                        });\n\n                    chart.tooltip.enabled(false);\n                    chart.noData('There is no data right now...');\n\n                    chart.yAxis\n                        .tickFormat(function (d) {\n                            return vm.yTickFormat ? vm.yTickFormat(d) : d;\n                        });\n\n                    chart.xAxis\n                        .tickFormat(function (d) {\n                            return vm.xTickFormat ? vm.xTickFormat(d) : d;\n                        });\n\n                    chartElem = d3.select($element.get(0))\n                        .select('.bar-chart svg')\n                        .datum(vm.data)\n                        .style('height', '285px')\n                        .call(chart);\n\n                    nv.utils.windowResize(() => {\n                        chart.update();\n                         configBarWidthAndLabel(0);\n                         drawEmptyState();\n                    });\n\n                    return chart;\n                }, function () {\n\n                    $timeout(configBarWidthAndLabel, 0);\n                    drawEmptyState();\n                });\n\n                function drawEmptyState() {\n                    if ($element.find('.nv-noData').length === 0) {\n                        d3.select($element.find('.empty-state')[0]).remove();\n                    } else {\n                        let g = chartElem.append('g').classed('empty-state', true),\n                            width = $element.find('.nvd3-svg').innerWidth(),\n                            margin = width * 0.1;\n\n                        g.append('g')\n                            .style('fill', 'rgba(0, 0, 0, 0.08)')\n                            .append('rect')\n                            .attr('height', height - 10)\n                            .attr('width', 38);\n\n                        g.append('g')\n                            .attr('transform', 'translate(42, 60)')\n                            .style('fill', 'rgba(0, 0, 0, 0.08)')\n                            .append('rect')\n                            .attr('height', 200)\n                            .attr('width', 38);\n\n                        g.append('g')\n                            .attr('transform', 'translate(84, 160)')\n                            .style('fill', 'rgba(0, 0, 0, 0.08)')\n                            .append('rect')\n                            .attr('height', 100)\n                            .attr('width', 38);\n\n                        g.attr('transform', 'translate(' + (50 + margin) + ', 0), ' + 'scale(' + ((width - 2*margin) / 126) + ', 1)' );\n                    }\n                }\n\n                /**\n                 * Aligns value label according to parent container size.\n                 * @return {void}\n                 */\n                function configBarWidthAndLabel(timeout: number = 1000) {\n                    var labels = $element.find('.nv-bar text'),\n                        chartBars = $element.find('.nv-bar'),\n                        parentHeight = (<any>$element.find('.nvd3-svg')[0]).getBBox().height;\n\n                    d3.select($element.find('.bar-chart')[0]).classed('visible', true);\n\n                    chartBars.each(function (index, item) {\n                        var barHeight = Number(d3.select(<any>item).select('rect').attr('height')),\n                            barWidth = Number(d3.select(<any>item).select('rect').attr('width')),\n                            element = d3.select(<any>item),\n                            x = d3.transform(element.attr('transform')).translate[0],\n                            y = d3.transform(element.attr('transform')).translate[1];\n\n                        element\n                            .attr('transform', 'translate(' + Number(x + index * (barWidth + 15)) + ', ' + (height - 20) + ')')\n                            .select('rect').attr('height', 0);\n\n                        element\n                            .transition()\n                            .duration(timeout)\n                            .attr('transform', 'translate(' + Number(x + index * (barWidth + 15)) + ', ' + y + ')')\n                            .select('rect').attr('height', barHeight);\n\n                        d3.select(labels[index])\n                            .attr('dy', barHeight / 2 + 10)\n                            .attr('x', barWidth / 2);\n                    });\n                }\n\n                /**\n                 * Converts palette color name into RGBA color representation.\n                 * Should by replaced by palette for charts.\n                 *\n                 * @param {string} color    Name of color from AM palette\n                 * @returns {string} RGBa format\n                 */\n                function materialColorToRgba(color) {\n                    return 'rgba(' + $mdColorPalette[color][500].value[0] + ','\n                        + $mdColorPalette[color][500].value[1] + ','\n                        + $mdColorPalette[color][500].value[2] + ','\n                        + ($mdColorPalette[color][500].value[3] || 1) + ')';\n                }\n\n                /**\n                 * Helpful method\n                 * @private\n                 */\n                function getMaterialColor(index) {\n                    if (!colors || colors.length < 1) return null;\n\n                    if (index >= colors.length) {\n                        index = 0;\n                    }\n\n                    return materialColorToRgba(colors[index]);\n                } \n                /**\n                 * Helpful method\n                 * @private\n                 */\n                function generateParameterColor() {\n                    if (!vm.data) return;\n\n                    vm.data.forEach(function (item, index) {\n                        if (item.values[0]) {\n                            item.values[0].color = item.values[0].color || getMaterialColor(index);\n                            item.color = item.values[0].color;\n                        }\n                    });\n                }\n            }\n        };\n    }\n})();","﻿/**\n * @file Registration of chart WebUI controls\n * @copyright Digital Living Software Corp. 2014-2016\n */\n\n/* global angular */\n\n(function () {\n    'use strict';\n\n    angular.module('pipCharts', [\n        'pipBarCharts',\n        'pipLineCharts',\n        'pipPieCharts',\n        'pipChartLegends',\n        'pipCharts.Templates'\n    ]);\n\n})();\n\n","(function () {\n    'use strict';\n\n    /**\n     * @ngdoc module\n     * @name pipLegends\n     *\n     * @description\n     * Legend of charts\n     */\n    angular.module('pipChartLegends', [])\n        .directive('pipChartLegend', pipChartLegend);\n\n    function pipChartLegend() {\n        return {\n            restrict: 'E',\n            scope: {\n                series: '=pipSeries',\n                interactive: '=pipInteractive'\n            },\n            templateUrl: 'legend/interactive_legend.html',\n            controller: function ($element, $scope, $timeout, $mdColorPalette) {\n                var colors = _.map($mdColorPalette, function (palette) {\n                    return palette[500].hex;\n                });\n                colors = _.filter(colors, function(color){\n                    return color !== undefined && color !== null;\n                });  \n                function colorCheckboxes() {\n                    var checkboxContainers = $($element).find('md-checkbox .md-container');\n\n                    checkboxContainers.each(function (index, item) {\n                        if (index >= $scope.series.length) {\n                            return \n                        }\n                        $(item)\n                            .css('color', $scope.series[index].color || colors[index])\n                            .find('.md-icon')\n                            .css('background-color', $scope.series[index].color || colors[index]);\n                    });\n                }\n\n                function animate() {\n                    var legendTitles = $($element).find('.chart-legend-item');\n\n                    legendTitles.each(function (index, item) {\n                        $timeout(function () {\n                            $(item).addClass('visible');\n                        }, 200 * index);\n                    });\n                }\n                \n                function prepareSeries() {\n                    if (!$scope.series) return;\n\n                    $scope.series.forEach(function (item, index) {\n                        item.color = item.color || (item.values && item.values[0] && item.values[0].color ? item.values[0].color : colors[index]);\n                        item.disabled = item.disabled || false;\n                    });   \n                }\n\n                $scope.$watch('series', function () {\n                    $timeout(function () {\n                        animate();\n                        colorCheckboxes();\n                    }, 0);\n                    prepareSeries();\n                }, true);\n\n                $scope.$watch('interactive', function (newValue, oldValue) {\n                    if (newValue == true && newValue != oldValue) {\n                        $timeout(colorCheckboxes, 0);\n                    }\n                });\n\n                $timeout(function () {\n                    animate();\n                    colorCheckboxes();\n                }, 0);\n                prepareSeries();\n            }\n        };\n    }\n})();","(function () {\n    'use strict';\n\n    /**\n     * @ngdoc module\n     * @name pipLineCharts\n     *\n     * @description\n     * Line chart on top of Rickshaw charts\n     */\n    angular.module('pipLineCharts', [])\n        .directive('pipLineChart', pipLineChart);\n\n    function pipLineChart() {\n        return {\n            restrict: 'E',\n            scope: {\n                series: '=pipSeries',\n                showYAxis: '=pipYAxis',\n                showXAxis: '=pipXAxis',\n                xFormat: '=pipXFormat',\n                xTickFormat: '=pipXTickFormat',\n                yTickFormat: '=pipYTickFormat',\n                xTickValues: '=pipXTickValues',\n                dynamic: '=pipDynamic',\n                fixedHeight: '@pipDiagramHeight',\n                dynamicHeight: '@pipDynamicHeight',\n                minHeight: '@pipMinHeight',\n                maxHeight: '@pipMaxHeight',\n                interactiveLegend: '=pipInterLegend'\n            },\n            bindToController: true,\n            controllerAs: 'lineChart',\n            templateUrl: 'line/line_chart.html',\n            controller: function ($element, $scope, $timeout, $interval, $mdColorPalette) {\n                var vm        = this;\n                var chart     = null;\n                var chartElem = null;\n                var setZoom = null;\n                var updateZoomOptions = null;\n                var fixedHeight = vm.fixedHeight || 270;\n                var dynamicHeight = vm.dynamicHeight || false;\n                var minHeight = vm.minHeight || fixedHeight;\n                var maxHeight = vm.maxHeight || fixedHeight;\n\n                var filteredColor = _.filter($mdColorPalette, function(palette, color){\n                    return _.isObject(color) && _.isObject(color[500] && _.isArray(color[500].value));\n                });\n                var colors = _.map(filteredColor, function (palette, color) {\n                    return color;\n                });\n                colors = _.filter(colors, function(color){\n                    return _.isObject($mdColorPalette[color]) && _.isObject($mdColorPalette[color][500] && _.isArray($mdColorPalette[color][500].value));\n                });\n                vm.data = prepareData(vm.series) || [];\n                vm.legend = _.clone(vm.series);\n                vm.sourceEvents = [];\n                \n                vm.isVisibleX = function () {\n                    return vm.showXAxis == undefined ? true : vm.showXAxis; \n                };\n\n                vm.isVisibleY = function () {\n                    return vm.showYAxis == undefined ? true : vm.showYAxis;\n                };\n\n                vm.zoomIn = function () {\n                    if (setZoom) {\n                        setZoom('in');\n                    }\n                };\n\n                vm.zoomOut = function () {\n                    if (setZoom) {\n                        setZoom('out');\n                    }\n                };\n                \n                if (vm.series && vm.series.length > colors.length) {\n                    vm.data = vm.series.slice(0, 9);\n                }\n\n                // Sets colors of items\n                generateParameterColor();\n\n                (<any>d3.scale).paletteColors = function () {\n                    return d3.scale.ordinal().range(colors.map(materialColorToRgba));\n                };\n\n                $scope.$watch('lineChart.series', function (updatedSeries) {\n                    vm.data = prepareData(updatedSeries);\n                    vm.legend = _.clone(vm.series);\n\n                    generateParameterColor();\n\n                    if (chart) {\n                         chart.xAxis\n                            .tickValues(vm.xTickValues && _.isArray(vm.xTickValues) && vm.xTickValues.length > 2 ? \n                                d3.range(vm.xTickValues[0], vm.xTickValues[1], vm.xTickValues[2]) : null);\n\n                        chartElem.datum(vm.data || []).call(chart);\n                        drawEmptyState();\n                        \n                        if (updateZoomOptions) updateZoomOptions(vm.data);\n                    }\n                }, true);\n\n                $scope.$watch('lineChart.legend', function(updatedLegend) {\n                    vm.data = prepareData(updatedLegend);\n                    vm.legend = updatedLegend;\n\n                    if (chart) {\n                        chartElem.datum(vm.data || []).call(chart);\n                        drawEmptyState();\n\n                        if (updateZoomOptions) updateZoomOptions(vm.data);\n                    }\n                }, true);\n\n                $scope.$on('$destroy', () => {\n                   setTimeout(()=> {d3.selectAll('.nvtooltip').style('opacity', 0); }, 800)\n                });\n\n                function prepareData(data) {\n                    let result = [];\n                    _.each(data, (seria) => {\n                        if (!seria.disabled && seria.values) result.push(seria);\n                    });\n\n                    return _.cloneDeep(result);\n                }\n\n                var getHeight = () => {\n                    if (dynamicHeight) {\n                        const heigth = Math.min(Math.max(minHeight, $element.parent().innerHeight()), maxHeight);\n                        return heigth;\n                    } else {\n                        return fixedHeight;\n                    }\n                };\n\n                /**\n                 * Instantiate chart\n                 */\n                nv.addGraph(() => {\n                    chart = nv.models.lineChart()\n                        .margin({ top: 20, right: 20, bottom: 30, left: 30 })\n                        .x(function (d) {\n                            return (d !== undefined && d.x !== undefined) ? (vm.xFormat ? vm.xFormat(d.x) : d.x) : d;\n                        })\n                        .y(function (d) {\n                            return (d !== undefined && d.value !== undefined) ? d.value : d;\n                        })\n                        .height(getHeight() - 50)\n                        .useInteractiveGuideline(true)\n                        .showXAxis(true)\n                        .showYAxis(true)\n                        .showLegend(false)\n                        .color(function(d) {\n                            return d.color || (<any>d3.scale).paletteColors().range();\n                        });\n\n                    chart.tooltip.enabled(false);\n                    chart.noData('There is no data right now...');\n\n                    chart.yAxis\n                        .tickFormat(function (d) {\n                            return vm.yTickFormat ? vm.yTickFormat(d) : d;\n                        });\n\n                    chart.xAxis\n                        .tickFormat(function (d) {\n                            return vm.xTickFormat ? vm.xTickFormat(d) : d;\n                        })\n                        .tickValues(vm.xTickValues && _.isArray(vm.xTickValues) && vm.xTickValues.length > 2 ? \n                                d3.range(vm.xTickValues[0], vm.xTickValues[1], vm.xTickValues[2]) : null);\n\n                    chartElem = d3.select($element.get(0)).select('.line-chart svg');\n                    chartElem.datum(vm.data || []).style('height', (getHeight() - 50) + 'px').call(chart);\n                    // Handle touches for correcting tooltip position\n                    $('.line-chart svg').on('touchstart touchmove', (e) => { \n                        setTimeout(() => {\n                            let tooltip = $('.nvtooltip'),\n                                tooltipW = tooltip.innerWidth(),\n                                bodyWidth = $('body').innerWidth(),\n                                x = e.originalEvent['touches'][0]['pageX'],\n                                y = e.originalEvent['touches'][0]['pageY'];\n\n                            tooltip.css('transform', 'translate(' \n                                + (x + tooltipW >= bodyWidth ? (x - tooltipW) : x) + ',' \n                                + y + ')');\n                            tooltip.css('left', 0); \n                            tooltip.css('top', 0);\n                        }); \n                    });\n\n                    $('.line-chart svg').on('touchstart touchend', (e) => { \n                        let removeTooltip = () => {\n                            let tooltip = $('.nvtooltip');\n                            tooltip.css('opacity', 0);\n                        };\n\n                        removeTooltip();\n\n                        setTimeout(() => {\n                            removeTooltip();\n                        }, 500); \n                    });\n\n                    if (vm.dynamic) {\n                        addZoom(chart, chartElem);\n                    }\n\n                    nv.utils.windowResize(() => { onResize(); });\n\n                    $scope.$on('pipMainResized', () => { onResize(); });\n\n                    return chart;\n                }, () => {\n                    drawEmptyState();\n                });\n\n                function onResize() {\n                    chart.height(getHeight() - 50);\n                    chartElem.style('height', (getHeight() - 50) + 'px');\n                    chart.update();\n                    drawEmptyState();\n                }\n\n                function drawEmptyState() {\n                    if (!$element.find('text.nv-noData').get(0)) {\n                        d3.select($element.find('.empty-state')[0]).remove();\n                    } else {\n                        let containerWidth = $element.find('.line-chart').innerWidth(),\n                            containerHeight = $element.find('.line-chart').innerHeight();\n                        \n                        if ($element.find('.empty-state').get(0)) {\n                            chartElem\n                                .select('image')\n                                .attr('transform', 'scale(' + (containerWidth / 1151) + ',' + (containerHeight / 216) + ')');\n                        } else {\n                            chartElem\n                                .append(\"defs\")\n                                .append(\"pattern\")\n                                .attr(\"height\", 1)\n                                .attr(\"width\", 1)\n                                .attr(\"x\", \"0\")\n                                .attr(\"y\", \"0\")\n                                .attr(\"id\", \"bg\")\n                                .append(\"image\")\n                                .attr('x', 17)\n                                .attr('y', 0)\n                                .attr('height', \"216px\")\n                                .attr('width', \"1151px\")\n                                .attr('transform', 'scale(' + (containerWidth / 1151) + ',' + (containerHeight / 216) + ')')\n                                .attr(\"xlink:href\", \"images/line_chart_empty_state.svg\");\n\n                            chartElem\n                                .append('rect')\n                                .classed('empty-state', true)\n                                .attr('height', \"100%\")\n                                .attr('width', \"100%\")\n                                .attr('fill', 'url(#bg)');\n                        }\n                    }\n                }\n\n                function updateScroll(domains, boundary) {\n                    var bDiff = boundary[1] - boundary[0],\n                        domDiff = domains[1] - domains[0],\n                        isEqual = (domains[1] - domains[0])/bDiff === 1;\n\n                    $($element[0]).find('.visual-scroll')\n                        .css('opacity', function () {\n                            return isEqual ? 0 : 1;\n                        });\n\n                    if (isEqual) return;\n                    \n                    $($element[0]).find('.scrolled-block')\n                        .css('left', function () {\n                            return domains[0]/bDiff * 100 + '%';\n                        })\n                        .css('width', function () {\n                            return domDiff/bDiff * 100 + '%';\n                        });\n                }\n\n                function addZoom(chart, svg) {\n                    // scaleExtent\n                    var scaleExtent = 4;\n\n                    // parameters\n                    var yAxis       = null;\n                    var xAxis       = null;\n                    var xDomain     = null;\n                    var yDomain     = null;\n                    var redraw      = null;\n                    var svg         = svg;\n\n                    // scales\n                    var xScale = null;\n                    var yScale = null;\n\n                    // min/max boundaries\n                    var x_boundary = null;\n                    var y_boundary = null;\n\n                    // create d3 zoom handler\n                    var d3zoom = d3.behavior.zoom();\n                    var prevXDomain = null;\n                    var prevScale = null;\n                    var prevTranslate = null;\n\n                    setData(chart);\n\n                    function setData(newChart) {\n                        // parameters\n                        yAxis       = newChart.yAxis;\n                        xAxis       = newChart.xAxis;\n                        xDomain     = newChart.xDomain || xAxis.scale().domain;\n                        yDomain     = newChart.yDomain || yAxis.scale().domain;\n                        redraw      = newChart.update;\n\n                        // scales\n                        xScale = xAxis.scale();\n                        yScale = yAxis.scale();\n\n                        // min/max boundaries\n                        x_boundary = xAxis.scale().domain().slice();\n                        y_boundary = yAxis.scale().domain().slice();\n\n                        // create d3 zoom handler\n                        prevXDomain = x_boundary;\n                        prevScale = d3zoom.scale();\n                        prevTranslate = d3zoom.translate();\n\n                        // ensure nice axis\n                        xScale.nice();\n                        yScale.nice();\n                    }\n\n                    // fix domain\n                    function fixDomain(domain, boundary, scale, translate) {\n                        if (domain[0] < boundary[0]) {\n                            domain[0] = boundary[0];\n                            if (prevXDomain[0] !== boundary[0] || scale !== prevScale) {\n                                domain[1] += (boundary[0] - domain[0]);\n                            } else {\n                                domain[1] = prevXDomain[1];\n                                translate = _.clone(prevTranslate);\n                            }\n\n                        }\n                        if (domain[1] > boundary[1]) {\n                            domain[1] = boundary[1];\n                            if (prevXDomain[1] !== boundary[1] || scale !== prevScale) {\n                                domain[0] -= (domain[1] - boundary[1]);\n                            } else {\n                                domain[0] = prevXDomain[0];\n                                translate = _.clone(prevTranslate);\n                            }\n                        }\n\n                        d3zoom.translate(translate);\n                        prevXDomain = _.clone(domain);\n                        prevScale = _.clone(scale);\n                        prevTranslate = _.clone(translate);\n                        return domain;\n                    }\n\n                    function updateChart() {\n                        d3zoom.scale(1);\n                        d3zoom.translate([0,0]);\n                        xScale.domain(x_boundary);\n                        d3zoom.x(xScale).y(yScale);\n                        svg.call(d3zoom);\n                    }\n\n                    // zoom event handler\n                    function zoomed() {\n                        // Switch off vertical zooming temporary\n                        // yDomain(yScale.domain());\n\n                        if ((<any>d3.event).scale === 1) {\n                            unzoomed();\n                            updateChart();\n                        } else {\n                            xDomain(fixDomain(xScale.domain(), x_boundary, (<any>d3.event).scale, (<any>d3.event).translate));\n                            redraw();\n                        }\n\n                        updateScroll(xScale.domain(), x_boundary);\n                    }\n\n                    //\n                    setZoom = function(which) {\n                        var center0 = [svg[0][0].getBBox().width / 2, svg[0][0].getBBox().height / 2];\n                        var translate0 = d3zoom.translate(), coordinates0 = coordinates(center0);\n\n                        if (which === 'in') {\n                            if (prevScale < scaleExtent) d3zoom.scale(prevScale + 0.2);\n                        } else {\n                            if (prevScale > 1) d3zoom.scale(prevScale - 0.2);\n                        }\n\n                        var center1 = point(coordinates0);\n                        d3zoom.translate([translate0[0] + center0[0] - center1[0], translate0[1] + center0[1] - center1[1]]);\n\n                        d3zoom.event(svg);\n                    };\n\n                    function step(which) {\n                        var translate = d3zoom.translate();\n\n                        if (which === 'right') {\n                            translate[0] -= 20;\n                        } else {\n                            translate[0] += 20;\n                        }\n\n                        d3zoom.translate(translate);\n                        d3zoom.event(svg);\n                    }\n\n                    function coordinates(point) {\n                        var scale = d3zoom.scale(), translate = d3zoom.translate();\n                        return [(point[0] - translate[0]) / scale, (point[1] - translate[1]) / scale];\n                    }\n\n                    function point(coordinates) {\n                        var scale = d3zoom.scale(), translate = d3zoom.translate();\n                        return [coordinates[0] * scale + translate[0], coordinates[1] * scale + translate[1]];\n                    }\n\n                    function keypress() {\n                        switch((<any>d3.event).keyCode) {\n                            case 39: step('right'); break;\n                            case 37: step('left'); break;\n                            case 107: setZoom('in'); break;\n                            case 109: setZoom('out');\n                        }\n                    }\n\n                    // zoom event handler\n                    function unzoomed() {\n                        xDomain(x_boundary);\n                        redraw();\n                        d3zoom.scale(1);\n                        d3zoom.translate([0,0]);\n                        prevScale = 1;\n                        prevTranslate = [0,0];\n                    }\n\n                    // initialize wrapper\n                    d3zoom.x(xScale)\n                        .y(yScale)\n                        .scaleExtent([1, scaleExtent])\n                        .on('zoom', zoomed);\n\n                    // add handler\n                    svg.call(d3zoom).on('dblclick.zoom', unzoomed);\n                    $($element.get(0)).addClass('dynamic');\n\n                    // add keyboard handlers\n                    svg\n                        .attr('focusable', false)\n                        .style('outline', 'none')\n                        .on('keydown', keypress)\n                        .on('focus', function () {});\n\n                    var getXMinMax = function(data) {\n                        var maxVal, minVal = null;\n\n                        for(var i=0;i<data.length;i++) {\n                            if (!data[i].disabled) {\n                                var tempMinVal = d3.max(data[i].values, function(d: any) { return vm.xFormat ? vm.xFormat(d.x) : d.x;} );\n                                var tempMaxVal = d3.min(data[i].values, function(d: any) { return vm.xFormat ? vm.xFormat(d.x) : d.x;} );\n                                minVal = (!minVal || tempMinVal < minVal) ? tempMinVal : minVal;\n                                maxVal = (!maxVal || tempMaxVal > maxVal) ? tempMaxVal : maxVal;\n                            }\n                        }\n                        return [maxVal, minVal];\n                    };\n\n                    updateZoomOptions = function(data) {\n                        yAxis = chart.yAxis;\n                        xAxis = chart.xAxis;\n\n                        xScale = xAxis.scale();\n                        yScale = yAxis.scale();\n\n                        x_boundary = getXMinMax(data);\n\n                        if (d3zoom.scale() === 1) {\n                            d3zoom.x(xScale).y(yScale);\n                            svg.call(d3zoom);\n                            d3zoom.event(svg);\n                        }\n\n                        updateScroll(xScale.domain(), x_boundary);\n                    }\n                }\n\n                /**\n                 * Converts palette color name into RGBA color representation.\n                 * Should by replaced by palette for charts.\n                 *\n                 * @param {string} color    Name of color from AM palette\n                 * @returns {string} RGBa format\n                 */\n                function materialColorToRgba(color) {\n                    return 'rgba(' + $mdColorPalette[color][500].value[0] + ','\n                        + $mdColorPalette[color][500].value[1] + ','\n                        + $mdColorPalette[color][500].value[2] + ','\n                        + ($mdColorPalette[color][500].value[3] || 1) + ')';\n                }\n\n                /**\n                 * Helpful method\n                 * @private\n                 */\n                function getMaterialColor(index) {\n                    if (!colors || colors.length < 1) return null;\n\n                    if (index >= colors.length) {\n                        index = 0;\n                    }\n\n                    return materialColorToRgba(colors[index]);\n                }                \n                /**\n                 * Helpful method\n                 * @private\n                 */\n                function generateParameterColor() {\n                    if (!vm.data) return;\n\n                    vm.data.forEach(function (item, index) {\n                        item.color = item.color || getMaterialColor(index);\n                    });\n                }\n            }\n        };\n    }\n})();","(function () {\n    'use strict';\n\n    /**\n     * @ngdoc module\n     * @name pipPieCharts\n     *\n     * @description\n     * Line chart on top of Rickshaw charts\n     */\n    angular.module('pipPieCharts', [])\n        .directive('pipPieChart', pipPieChart);\n\n    function pipPieChart() {\n        return {\n            restrict: 'E',\n            scope: {\n                series: '=pipSeries',\n                donut: '=pipDonut',\n                legend: '=pipShowLegend',\n                total: '=pipShowTotal',\n                size: '=pipPieSize',\n                centered: '=pipCentered'\n            },\n            bindToController: true,\n            controllerAs: 'pieChart',\n            templateUrl: 'pie/pie_chart.html',\n            controller: function ($element, $scope, $timeout, $interval, $mdColorPalette) {\n                var vm               = this;\n                var chart            = null;\n                var titleElem        = null;\n                var chartElem        = null;\n                var colors           = _.map($mdColorPalette, function (palette, color) {\n                    return color;\n                });\n                colors = _.filter(colors, function(color){\n                    return _.isObject($mdColorPalette[color]) && _.isObject($mdColorPalette[color][500] && _.isArray($mdColorPalette[color][500].value));\n                });                \n                var resizeTitleLabel = resizeTitleLabelUnwrap;\n\n                vm.data = vm.data || [];\n\n                vm.showLegend = function () {\n                    return vm.legend !== undefined ? vm.legend: true;\n                };\n\n                if (vm.series && vm.series.length > colors.length) {\n                    vm.data = vm.series.slice(0, 9);\n                }\n\n                $scope.$watch('pieChart.series', function (newVal) {\n                    vm.data = newVal;\n\n                    generateParameterColor();\n\n                    if (chart) {\n                        chartElem.datum(vm.data).call(chart);\n                        $timeout(resizeTitleLabel);\n                        drawEmptyState(d3.select($element.get(0)).select('.pie-chart svg')[0][0]);\n                    }\n                }, true);\n\n                // Sets colors of items\n                generateParameterColor();\n\n                (<any>d3.scale).paletteColors = function () {\n                    return d3.scale.ordinal().range(colors.map(materialColorToRgba));\n                };\n\n                /**\n                 * Instantiate chart\n                 */\n                nv.addGraph(() => {\n                    chart = nv.models.pieChart()\n                        .margin({ top: 0, right: 0, bottom: 0, left: 0 })\n                        .x(function (d) {\n                            return vm.donut ? d.value : null;\n                        })\n                        .y(function (d) {\n                            return d.value;\n                        })\n                        .height(vm.size || 250)\n                        .width(vm.size || 250)\n                        .showLabels(true)\n                        .labelThreshold(.001)\n                        .growOnHover(false)\n                        .donut(vm.donut)\n                        .donutRatio(0.5)\n                        .color(function(d) {\n                            return d.color || (<any>d3.scale).paletteColors().range();\n                        });\n\n                    chart.tooltip.enabled(false);\n                    chart.noData('There is no data right now...');\n                    chart.showLegend(false);\n\n                    chartElem = d3.select($element.get(0))\n                        .select('.pie-chart')\n                        .style('height', (vm.size || 250) + 'px')\n                        .style('width', vm.centered ? '100%' : (vm.size || 250) + 'px')\n                        .select('svg')\n                        .style('opacity', 0)\n                        .datum(vm.data || [])\n                        .call(chart);\n\n                    nv.utils.windowResize(function () {\n                        chart.update();\n                        $timeout(resizeTitleLabel);\n                        centerChart();\n                        drawEmptyState(d3.select($element.get(0)).select('.pie-chart svg')[0][0]);\n                    });\n\n                    return chart;\n                }, () => {\n                    $timeout(function () {\n                        var svgElem  = d3.select($element.get(0)).select('.pie-chart svg')[0][0];\n                        renderTotalLabel(svgElem);\n                        d3.select(svgElem)\n                            .transition()\n                            .duration(1000)\n                            .style('opacity', 1);\n                        \n                        $timeout(resizeTitleLabelUnwrap, 800);\n                        centerChart();\n                        drawEmptyState(svgElem);\n                    });\n                });\n\n                function drawEmptyState(svg) {\n                    if (!$element.find('text.nv-noData').get(0)) {\n                        d3.select($element.find('.empty-state')[0]).remove();\n                        $element.find('.pip-empty-pie-text').remove();\n                    } else {\n                    \n                        if ($element.find('.pip-empty-pie-text').length === 0) { \n                            $element.find('.pie-chart')\n                                .append(\"<div class='pip-empty-pie-text'>There is no data right now...</div>\");\n                        }\n\n                        var pie = d3.layout.pie().sort(null),\n                            size = Number(vm.size || 250);\n\n                        var arc = d3.svg.arc()\n                            .innerRadius(size / 2 - 20)\n                            .outerRadius(size / 2 - 57);\n                    \n                        svg = d3.select(svg)\n                            .append(\"g\")\n                            .classed('empty-state', true)\n                            .attr('transform', \"translate(\" + size / 2 + \",\" + size / 2 + \")\");\n                    \n                        var path = svg.selectAll(\"path\")\n                            .data(pie([1]))\n                            .enter().append(\"path\")\n                            .attr(\"fill\", \"rgba(0, 0, 0, 0.08)\")\n                            .attr(\"d\", <any>arc);\n                    }\n                }\n\n                function centerChart() {\n                    if (vm.centered) {\n                        let svgElem  = d3.select($element.get(0)).select('.pie-chart svg')[0][0],\n                        leftMargin = $(svgElem).innerWidth() / 2 - (vm.size || 250) / 2;\n                        d3.select($element.find('.nv-pieChart')[0]).attr('transform', 'translate(' + leftMargin + ', 0)');\n                    }\n                }\n\n                function renderTotalLabel(svgElem) {\n                    if ((!vm.total && !vm.donut) || !vm.data) return;\n\n                    let totalVal = vm.data.reduce(function (sum, curr) {\n                        return sum + curr.value;\n                    }, 0);\n\n                    if (totalVal >= 10000) totalVal = (totalVal / 1000).toFixed(1) + 'k';\n                    \n                    d3.select(svgElem)\n                        .select('.nv-pie:not(.nvd3)')\n                        .append('text')\n                        .classed('label-total', true)\n                        .attr('text-anchor', 'middle')\n                        .style('dominant-baseline', 'central')\n                        .text(totalVal);\n\n                    titleElem = d3.select($element.find('text.label-total').get(0)).style('opacity', 0);\n                }\n\n                function resizeTitleLabelUnwrap() {\n                    if ((!vm.total && !vm.donut) || !vm.data) return;\n\n                    var boxSize =  $element.find('.nvd3.nv-pieChart').get(0).getBBox();\n\n                    if (!boxSize.width || !boxSize.height) {\n                        return;\n                    }\n\n                    titleElem.style('font-size', ~~boxSize.width / 4.5).style('opacity', 1);\n                }\n\n                /**\n                 * Converts palette color name into RGBA color representation.\n                 * Should by replaced by palette for charts.\n                 *\n                 * @param {string} color    Name of color from AM palette\n                 * @returns {string} RGBa format\n                 */\n                function materialColorToRgba(color) {\n                    return 'rgba(' + $mdColorPalette[color][500].value[0] + ','\n                        + $mdColorPalette[color][500].value[1] + ','\n                        + $mdColorPalette[color][500].value[2] + ','\n                        + ($mdColorPalette[color][500].value[3] || 1) + ')';\n                }\n\n                /**\n                 * Helpful method\n                 * @private\n                 */\n                function getMaterialColor(index) {\n                    if (!colors || colors.length < 1) return null;\n\n                    if (index >= colors.length) {\n                        index = 0;\n                    }\n\n                    return materialColorToRgba(colors[index]);\n                } \n                /**\n                 * Helpful method\n                 * @private\n                 */\n                function generateParameterColor() {\n                    if (!vm.data) return;\n\n                    vm.data.forEach(function (item, index) {\n                        item.color = item.color || getMaterialColor(index);\n                    });\n                }\n            }\n        };\n    }\n})();","(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('bar/bar_chart.html',\n    '<div class=\"bar-chart\"><svg></svg></div><pip-chart-legend pip-series=\"barChart.legend\" pip-interactive=\"barChart.interactiveLegend\"></pip-chart-legend>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('line/line_chart.html',\n    '<div class=\"line-chart\" flex=\"auto\" layout=\"column\"><svg class=\"flex-auto\" ng-class=\"{\\'visible-x-axis\\': lineChart.isVisibleX(), \\'visible-y-axis\\': lineChart.isVisibleY()}\"></svg><div class=\"scroll-container\"><div class=\"visual-scroll\"><div class=\"scrolled-block\"></div></div></div><md-button class=\"md-fab md-mini minus-button\" ng-click=\"lineChart.zoomOut()\"><md-icon md-svg-icon=\"icons:minus-circle\"></md-icon></md-button><md-button class=\"md-fab md-mini plus-button\" ng-click=\"lineChart.zoomIn()\"><md-icon md-svg-icon=\"icons:plus-circle\"></md-icon></md-button></div><pip-chart-legend pip-series=\"lineChart.legend\" pip-interactive=\"lineChart.interactiveLegend\"></pip-chart-legend>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('legend/interactive_legend.html',\n    '<div><div class=\"chart-legend-item\" ng-repeat=\"item in series\" ng-show=\"item.values || item.value\"><md-checkbox ng-model=\"item.disabled\" ng-true-value=\"false\" ng-false-value=\"true\" ng-if=\"interactive\" aria-label=\"{{ item.label }}\"><p class=\"legend-item-value\" ng-if=\"item.value\" ng-style=\"{\\'background-color\\': item.color}\">{{ item.value }}</p><p class=\"legend-item-label\">{{:: item.label || item.key }}</p></md-checkbox><div ng-if=\"!interactive\"><span class=\"bullet\" ng-style=\"{\\'background-color\\': item.color}\"></span> <span>{{:: item.label || item.key}}</span></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('pie/pie_chart.html',\n    '<div class=\"pie-chart\" ng-class=\"{\\'circle\\': !pieChart.donut}\"><svg class=\"flex-auto\"></svg></div><pip-chart-legend pip-series=\"pieChart.data\" pip-interactive=\"false\" ng-if=\"pieChart.showLegend()\"></pip-chart-legend>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-charts-html.min.js.map\n"]}