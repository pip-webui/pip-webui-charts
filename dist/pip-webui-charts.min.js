!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.pip||(t.pip={})).charts=e()}}(function(){return function e(t,n,i){function a(l,o){if(!n[l]){if(!t[l]){var s="function"==typeof require&&require;if(!o&&s)return s(l,!0);if(r)return r(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[l]={exports:{}};t[l][0].call(u.exports,function(e){var n=t[l][1][e];return a(n?n:e)},u,u.exports,e,t,n,i)}return n[l].exports}for(var r="function"==typeof require&&require,l=0;l<i.length;l++)a(i[l]);return a}({1:[function(e,t,n){!function(){"use strict";function e(){return{restrict:"E",scope:{series:"=pipSeries",xTickFormat:"=pipXTickFormat",yTickFormat:"=pipYTickFormat",interactiveLegend:"=pipInterLegend"},bindToController:!0,controllerAs:"barChart",templateUrl:"bar/bar_chart.html",controller:["$element","$scope","$timeout","$interval","$mdColorPalette",function(e,t,n,i,a){function r(e){var t=[];return _.each(e,function(e){!e.disabled&&e.values&&t.push(e)}),_.cloneDeep(t)}function l(){if(0===e.find(".nv-noData").length)d3.select(e.find(".empty-state")[0]).remove();else{var t=h.append("g").classed("empty-state",!0),n=e.find(".nvd3-svg").innerWidth(),i=.1*n;t.append("g").style("fill","rgba(0, 0, 0, 0.08)").append("rect").attr("height",m-10).attr("width",38),t.append("g").attr("transform","translate(42, 60)").style("fill","rgba(0, 0, 0, 0.08)").append("rect").attr("height",200).attr("width",38),t.append("g").attr("transform","translate(84, 160)").style("fill","rgba(0, 0, 0, 0.08)").append("rect").attr("height",100).attr("width",38),t.attr("transform","translate("+(50+i)+", 0), scale("+(n-2*i)/126+", 1)")}}function o(t){void 0===t&&(t=1e3);var n=e.find(".nv-bar text"),i=e.find(".nv-bar");e.find(".nvd3-svg")[0].getBBox().height;d3.select(e.find(".bar-chart")[0]).classed("visible",!0),i.each(function(e,i){var a=Number(d3.select(i).select("rect").attr("height")),r=Number(d3.select(i).select("rect").attr("width")),l=d3.select(i),o=d3.transform(l.attr("transform")).translate[0],s=d3.transform(l.attr("transform")).translate[1];l.attr("transform","translate("+Number(o+e*(r+15))+", "+(m-20)+")").select("rect").attr("height",0),l.transition().duration(t).attr("transform","translate("+Number(o+e*(r+15))+", "+s+")").select("rect").attr("height",a),d3.select(n[e]).attr("dy",a/2+10).attr("x",r/2)})}function s(e){return"rgba("+a[e][500].value[0]+","+a[e][500].value[1]+","+a[e][500].value[2]+","+(a[e][500].value[3]||1)+")"}function c(e){return!f||f.length<1?null:(e>=f.length&&(e=0),s(f[e]))}function u(){d.data&&d.data.forEach(function(e,t){e.values[0]&&(e.values[0].color=e.values[0].color||c(t),e.color=e.values[0].color)})}var d=this,p=null,h=null,f=_.map(a,function(e,t){return t});f=_.filter(f,function(e){return _.isObject(a[e])&&_.isObject(a[e][500]&&_.isArray(a[e][500].value))});var m=270;d.data=r(d.series)||[],d.legend=_.clone(d.series),(d.series||[]).length>f.length&&(d.data=d.series.slice(0,9)),u(),d3.scale.paletteColors=function(){return d3.scale.ordinal().range(f.map(s))},t.$watch("barChart.series",function(e){d.data=r(e),d.legend=_.clone(d.series),u(),p&&(h.datum(d.data).call(p),o(),l())}),t.$watch("barChart.legend",function(e){d.data=r(e),d.legend=e,p&&(h.datum(d.data).call(p),o(),l())},!0),nv.addGraph(function(){return p=nv.models.discreteBarChart().margin({top:10,right:0,bottom:10,left:50}).x(function(e){return e.label||e.key||e.x}).y(function(e){return e.value}).showValues(!0).staggerLabels(!0).showXAxis(!0).showYAxis(!0).valueFormat(d3.format("d")).duration(0).height(m).color(function(e){return d.data[e.series].color||s(f[e.series])}),p.tooltip.enabled(!1),p.noData("There is no data right now..."),p.yAxis.tickFormat(function(e){return d.yTickFormat?d.yTickFormat(e):e}),p.xAxis.tickFormat(function(e){return d.xTickFormat?d.xTickFormat(e):e}),h=d3.select(e.get(0)).select(".bar-chart svg").datum(d.data).style("height","285px").call(p),nv.utils.windowResize(function(){p.update(),o(0),l()}),p},function(){n(o,0),l()})}]}}angular.module("pipBarCharts",[]).directive("pipBarChart",e)}()},{}],2:[function(e,t,n){!function(){"use strict";angular.module("pipCharts",["pipBarCharts","pipLineCharts","pipPieCharts","pipChartLegends","pipCharts.Templates"])}()},{}],3:[function(e,t,n){!function(){"use strict";function e(){return{restrict:"E",scope:{series:"=pipSeries",interactive:"=pipInteractive"},templateUrl:"legend/interactive_legend.html",controller:["$element","$scope","$timeout","$mdColorPalette",function(e,t,n,i){function a(){var n=$(e).find("md-checkbox .md-container");n.each(function(e,n){e>=t.series.length||$(n).css("color",t.series[e].color||o[e]).find(".md-icon").css("background-color",t.series[e].color||o[e])})}function r(){var t=$(e).find(".chart-legend-item");t.each(function(e,t){n(function(){$(t).addClass("visible")},200*e)})}function l(){t.series&&t.series.forEach(function(e,t){e.color=e.color||(e.values&&e.values[0]&&e.values[0].color?e.values[0].color:o[t]),e.disabled=e.disabled||!1})}var o=_.map(i,function(e){return e[500].hex});o=_.filter(o,function(e){return void 0!==e&&null!==e}),t.$watch("series",function(){n(function(){r(),a()},0),l()},!0),t.$watch("interactive",function(e,t){1==e&&e!=t&&n(a,0)}),n(function(){r(),a()},0),l()}]}}angular.module("pipChartLegends",[]).directive("pipChartLegend",e)}()},{}],4:[function(e,t,n){!function(){"use strict";function e(){return{restrict:"E",scope:{series:"=pipSeries",showYAxis:"=pipYAxis",showXAxis:"=pipXAxis",xFormat:"=pipXFormat",xTickFormat:"=pipXTickFormat",yTickFormat:"=pipYTickFormat",xTickValues:"=pipXTickValues",dynamic:"=pipDynamic",fixedHeight:"@pipDiagramHeight",dynamicHeight:"@pipDynamicHeight",minHeight:"@pipMinHeight",maxHeight:"@pipMaxHeight",interactiveLegend:"=pipInterLegend"},bindToController:!0,controllerAs:"lineChart",templateUrl:"line/line_chart.html",controller:["$element","$scope","$timeout","$interval","$mdColorPalette",function(e,t,n,i,a){function r(e){var t=[];return _.each(e,function(e){!e.disabled&&e.values&&t.push(e)}),_.cloneDeep(t)}function l(){f.height(T()-50),m.style("height",T()-50+"px"),f.update(),o()}function o(){if(e.find("text.nv-noData").get(0)){var t=e.find(".line-chart").innerWidth(),n=e.find(".line-chart").innerHeight();e.find(".empty-state").get(0)?m.select("image").attr("transform","scale("+t/1151+","+n/216+")"):(m.append("defs").append("pattern").attr("height",1).attr("width",1).attr("x","0").attr("y","0").attr("id","bg").append("image").attr("x",17).attr("y",0).attr("height","216px").attr("width","1151px").attr("transform","scale("+t/1151+","+n/216+")").attr("xlink:href","images/line_chart_empty_state.svg"),m.append("rect").classed("empty-state",!0).attr("height","100%").attr("width","100%").attr("fill","url(#bg)"))}else d3.select(e.find(".empty-state")[0]).remove()}function s(t,n){var i=n[1]-n[0],a=t[1]-t[0],r=(t[1]-t[0])/i===1;$(e[0]).find(".visual-scroll").css("opacity",function(){return r?0:1}),r||$(e[0]).find(".scrolled-block").css("left",function(){return t[0]/i*100+"%"}).css("width",function(){return a/i*100+"%"})}function c(t,n){function i(e){m=e.yAxis,x=e.xAxis,b=e.xDomain||x.scale().domain,y=e.yDomain||m.scale().domain,C=e.update,w=x.scale(),k=m.scale(),T=x.scale().domain().slice(),F=m.scale().domain().slice(),z=T,L=A.scale(),D=A.translate(),w.nice(),k.nice()}function a(e,t,n,i){return e[0]<t[0]&&(e[0]=t[0],z[0]!==t[0]||n!==L?e[1]+=t[0]-e[0]:(e[1]=z[1],i=_.clone(D))),e[1]>t[1]&&(e[1]=t[1],z[1]!==t[1]||n!==L?e[0]-=e[1]-t[1]:(e[0]=z[0],i=_.clone(D))),A.translate(i),z=_.clone(e),L=_.clone(n),D=_.clone(i),e}function r(){A.scale(1),A.translate([0,0]),w.domain(T),A.x(w).y(k),n.call(A)}function l(){1===d3.event.scale?(p(),r()):(b(a(w.domain(),T,d3.event.scale,d3.event.translate)),C()),s(w.domain(),T)}function o(e){var t=A.translate();"right"===e?t[0]-=20:t[0]+=20,A.translate(t),A.event(n)}function c(e){var t=A.scale(),n=A.translate();return[(e[0]-n[0])/t,(e[1]-n[1])/t]}function u(e){var t=A.scale(),n=A.translate();return[e[0]*t+n[0],e[1]*t+n[1]]}function d(){switch(d3.event.keyCode){case 39:o("right");break;case 37:o("left");break;case 107:g("in");break;case 109:g("out")}}function p(){b(T),C(),A.scale(1),A.translate([0,0]),L=1,D=[0,0]}var f=4,m=null,x=null,b=null,y=null,C=null,n=n,w=null,k=null,T=null,F=null,A=d3.behavior.zoom(),z=null,L=null,D=null;i(t),g=function(e){var t=[n[0][0].getBBox().width/2,n[0][0].getBBox().height/2],i=A.translate(),a=c(t);"in"===e?L<f&&A.scale(L+.2):L>1&&A.scale(L-.2);var r=u(a);A.translate([i[0]+t[0]-r[0],i[1]+t[1]-r[1]]),A.event(n)},A.x(w).y(k).scaleExtent([1,f]).on("zoom",l),n.call(A).on("dblclick.zoom",p),$(e.get(0)).addClass("dynamic"),n.attr("focusable",!1).style("outline","none").on("keydown",d).on("focus",function(){});var H=function(e){for(var t,n=null,i=0;i<e.length;i++)if(!e[i].disabled){var a=d3.max(e[i].values,function(e){return h.xFormat?h.xFormat(e.x):e.x}),r=d3.min(e[i].values,function(e){return h.xFormat?h.xFormat(e.x):e.x});n=!n||a<n?a:n,t=!t||r>t?r:t}return[t,n]};v=function(e){m=t.yAxis,x=t.xAxis,w=x.scale(),k=m.scale(),T=H(e),1===A.scale()&&(A.x(w).y(k),n.call(A),A.event(n)),s(w.domain(),T)}}function u(e){return"rgba("+a[e][500].value[0]+","+a[e][500].value[1]+","+a[e][500].value[2]+","+(a[e][500].value[3]||1)+")"}function d(e){return!k||k.length<1?null:(e>=k.length&&(e=0),u(k[e]))}function p(){h.data&&h.data.forEach(function(e,t){e.color=e.color||d(t)})}var h=this,f=null,m=null,g=null,v=null,x=h.fixedHeight||270,b=h.dynamicHeight||!1,y=h.minHeight||x,C=h.maxHeight||x,w=_.filter(a,function(e,t){return _.isObject(t)&&_.isObject(t[500]&&_.isArray(t[500].value))}),k=_.map(w,function(e,t){return t});k=_.filter(k,function(e){return _.isObject(a[e])&&_.isObject(a[e][500]&&_.isArray(a[e][500].value))}),h.data=r(h.series)||[],h.legend=_.clone(h.series),h.sourceEvents=[],h.isVisibleX=function(){return void 0==h.showXAxis||h.showXAxis},h.isVisibleY=function(){return void 0==h.showYAxis||h.showYAxis},h.zoomIn=function(){g&&g("in")},h.zoomOut=function(){g&&g("out")},h.series&&h.series.length>k.length&&(h.data=h.series.slice(0,9)),p(),d3.scale.paletteColors=function(){return d3.scale.ordinal().range(k.map(u))},t.$watch("lineChart.series",function(e){h.data=r(e),h.legend=_.clone(h.series),p(),f&&(m.datum(h.data||[]).call(f),o(),v&&v(h.data))},!0),t.$watch("lineChart.legend",function(e){h.data=r(e),h.legend=e,f&&(m.datum(h.data||[]).call(f),o(),v&&v(h.data))},!0),t.$on("$destroy",function(){setTimeout(function(){d3.selectAll(".nvtooltip").style("opacity",0)},800)});var T=function(){if(b){var t=Math.min(Math.max(y,e.parent().innerHeight()),C);return t}return x};nv.addGraph(function(){return f=nv.models.lineChart().margin({top:20,right:20,bottom:30,left:30}).x(function(e){return void 0!==e&&void 0!==e.x?h.xFormat?h.xFormat(e.x):e.x:e}).y(function(e){return void 0!==e&&void 0!==e.value?e.value:e}).height(T()-50).useInteractiveGuideline(!0).showXAxis(!0).showYAxis(!0).showLegend(!1).color(function(e){return e.color||d3.scale.paletteColors().range()}),f.tooltip.enabled(!1),f.noData("There is no data right now..."),f.yAxis.tickFormat(function(e){return h.yTickFormat?h.yTickFormat(e):e}),f.xAxis.tickFormat(function(e){return h.xTickFormat?h.xTickFormat(e):e}).tickValues(h.xTickValues&&_.isArray(h.xTickValues)&&h.xTickValues.length>2?d3.range(h.xTickValues[0],h.xTickValues[1],h.xTickValues[2]):null),m=d3.select(e.get(0)).select(".line-chart svg"),m.datum(h.data||[]).style("height",T()-50+"px").call(f),$(".line-chart svg").on("touchstart touchmove",function(e){setTimeout(function(){var t=$(".nvtooltip"),n=t.innerWidth(),i=$("body").innerWidth(),a=e.originalEvent.touches[0].pageX,r=e.originalEvent.touches[0].pageY;t.css("transform","translate("+(a+n>=i?a-n:a)+","+r+")"),t.css("left",0),t.css("top",0)})}),$(".line-chart svg").on("touchstart touchend",function(e){var t=function(){var e=$(".nvtooltip");e.css("opacity",0)};t(),setTimeout(function(){t()},500)}),h.dynamic&&c(f,m),nv.utils.windowResize(function(){l()}),t.$on("pipMainResized",function(){l()}),f},function(){o()})}]}}angular.module("pipLineCharts",[]).directive("pipLineChart",e)}()},{}],5:[function(e,t,n){!function(){"use strict";function e(){return{restrict:"E",scope:{series:"=pipSeries",donut:"=pipDonut",legend:"=pipShowLegend",total:"=pipShowTotal",size:"=pipPieSize",centered:"=pipCentered"},bindToController:!0,controllerAs:"pieChart",templateUrl:"pie/pie_chart.html",controller:["$element","$scope","$timeout","$interval","$mdColorPalette",function(e,t,n,i,a){function r(t){if(e.find("text.nv-noData").get(0)){0===e.find(".pip-empty-pie-text").length&&e.find(".pie-chart").append("<div class='pip-empty-pie-text'>There is no data right now...</div>");var n=d3.layout.pie().sort(null),i=Number(p.size||250),a=d3.svg.arc().innerRadius(i/2-20).outerRadius(i/2-57);t=d3.select(t).append("g").classed("empty-state",!0).attr("transform","translate("+i/2+","+i/2+")");t.selectAll("path").data(n([1])).enter().append("path").attr("fill","rgba(0, 0, 0, 0.08)").attr("d",a)}else d3.select(e.find(".empty-state")[0]).remove(),e.find(".pip-empty-pie-text").remove()}function l(){if(p.centered){var t=d3.select(e.get(0)).select(".pie-chart svg")[0][0],n=$(t).innerWidth()/2-(p.size||250)/2;d3.select(e.find(".nv-pieChart")[0]).attr("transform","translate("+n+", 0)")}}function o(t){if((p.total||p.donut)&&p.data){var n=p.data.reduce(function(e,t){return e+t.value},0);n>=1e4&&(n=(n/1e3).toFixed(1)+"k"),d3.select(t).select(".nv-pie:not(.nvd3)").append("text").classed("label-total",!0).attr("text-anchor","middle").style("dominant-baseline","central").text(n),f=d3.select(e.find("text.label-total").get(0)).style("opacity",0)}}function s(){if((p.total||p.donut)&&p.data){var t=e.find(".nvd3.nv-pieChart").get(0).getBBox();t.width&&t.height&&f.style("font-size",~~t.width/4.5).style("opacity",1)}}function c(e){return"rgba("+a[e][500].value[0]+","+a[e][500].value[1]+","+a[e][500].value[2]+","+(a[e][500].value[3]||1)+")"}function u(e){return!g||g.length<1?null:(e>=g.length&&(e=0),c(g[e]))}function d(){p.data&&p.data.forEach(function(e,t){e.color=e.color||u(t)})}var p=this,h=null,f=null,m=null,g=_.map(a,function(e,t){return t});g=_.filter(g,function(e){return _.isObject(a[e])&&_.isObject(a[e][500]&&_.isArray(a[e][500].value))});var v=s;p.data=p.data||[],p.showLegend=function(){return void 0===p.legend||p.legend},p.series&&p.series.length>g.length&&(p.data=p.series.slice(0,9)),t.$watch("pieChart.series",function(t){p.data=t,d(),h&&(m.datum(p.data).call(h),n(v),r(d3.select(e.get(0)).select(".pie-chart svg")[0][0]))},!0),d(),d3.scale.paletteColors=function(){return d3.scale.ordinal().range(g.map(c))},nv.addGraph(function(){return h=nv.models.pieChart().margin({top:0,right:0,bottom:0,left:0}).x(function(e){return p.donut?e.value:null}).y(function(e){return e.value}).height(p.size||250).width(p.size||250).showLabels(!0).labelThreshold(.001).growOnHover(!1).donut(p.donut).donutRatio(.5).color(function(e){return e.color||d3.scale.paletteColors().range()}),h.tooltip.enabled(!1),h.noData("There is no data right now..."),h.showLegend(!1),m=d3.select(e.get(0)).select(".pie-chart").style("height",(p.size||250)+"px").style("width",p.centered?"100%":(p.size||250)+"px").select("svg").style("opacity",0).datum(p.data||[]).call(h),nv.utils.windowResize(function(){h.update(),n(v),l(),r(d3.select(e.get(0)).select(".pie-chart svg")[0][0])}),h},function(){n(function(){var t=d3.select(e.get(0)).select(".pie-chart svg")[0][0];o(t),d3.select(t).transition().duration(1e3).style("opacity",1),n(s,800),l(),r(t)})})}]}}angular.module("pipPieCharts",[]).directive("pipPieChart",e)}()},{}],6:[function(e,t,n){!function(e){try{e=angular.module("pipCharts.Templates")}catch(t){e=angular.module("pipCharts.Templates",[])}e.run(["$templateCache",function(e){e.put("bar/bar_chart.html",'<div class="bar-chart"><svg></svg></div><pip-chart-legend pip-series="barChart.legend" pip-interactive="barChart.interactiveLegend"></pip-chart-legend>')}])}(),function(e){try{e=angular.module("pipCharts.Templates")}catch(t){e=angular.module("pipCharts.Templates",[])}e.run(["$templateCache",function(e){e.put("line/line_chart.html",'<div class="line-chart" flex="auto" layout="column"><svg class="flex-auto" ng-class="{\'visible-x-axis\': lineChart.isVisibleX(), \'visible-y-axis\': lineChart.isVisibleY()}"></svg><div class="scroll-container"><div class="visual-scroll"><div class="scrolled-block"></div></div></div><md-button class="md-fab md-mini minus-button" ng-click="lineChart.zoomOut()"><md-icon md-svg-icon="icons:minus-circle"></md-icon></md-button><md-button class="md-fab md-mini plus-button" ng-click="lineChart.zoomIn()"><md-icon md-svg-icon="icons:plus-circle"></md-icon></md-button></div><pip-chart-legend pip-series="lineChart.legend" pip-interactive="lineChart.interactiveLegend"></pip-chart-legend>')}])}(),function(e){try{e=angular.module("pipCharts.Templates")}catch(t){e=angular.module("pipCharts.Templates",[])}e.run(["$templateCache",function(e){e.put("legend/interactive_legend.html",'<div><div class="chart-legend-item" ng-repeat="item in series" ng-show="item.values || item.value"><md-checkbox ng-model="item.disabled" ng-true-value="false" ng-false-value="true" ng-if="interactive" aria-label="{{ item.label }}"><p class="legend-item-value" ng-if="item.value" ng-style="{\'background-color\': item.color}">{{ item.value }}</p><p class="legend-item-label">{{:: item.label || item.key }}</p></md-checkbox><div ng-if="!interactive"><span class="bullet" ng-style="{\'background-color\': item.color}"></span> <span>{{:: item.label || item.key}}</span></div></div></div>')}])}(),function(e){try{e=angular.module("pipCharts.Templates")}catch(t){e=angular.module("pipCharts.Templates",[])}e.run(["$templateCache",function(e){e.put("pie/pie_chart.html",'<div class="pie-chart" ng-class="{\'circle\': !pieChart.donut}"><svg class="flex-auto"></svg></div><pip-chart-legend pip-series="pieChart.data" pip-interactive="false" ng-if="pieChart.showLegend()"></pip-chart-legend>')}])}()},{}]},{},[6,1,2,3,4,5])(6)});
//# sourceMappingURL=pip-webui-charts.min.js.map
