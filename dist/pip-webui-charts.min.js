!function(t){"use strict";t.module("pipCharts",["pipStaticCharts"])}(window.angular),function(t){try{t=angular.module("pipCharts.Templates")}catch(e){t=angular.module("pipCharts.Templates",[])}t.run(["$templateCache",function(t){t.put("bar/bar_chart.html",'<div class="bar-chart flex-auto layout-column"><svg class="flex-auto"></svg></div><div class="static-chart-legend"><div class="legend-title" ng-repeat="item in barChart.legend"><span class="bullet" ng-style="{\'background-color\': item.color}"></span> <span>{{:: item.label}}</span></div></div>')}])}(),function(){"use strict";function t(){return{restrict:"E",scope:{series:"=pipSeries"},bindToController:!0,controllerAs:"barChart",templateUrl:"bar/bar_chart.html",controller:["$element","$scope","$timeout","$interval","$mdColorPalette",function(t,e,a,r,l){function n(){var t=d3.selectAll(".nv-bar text")[0],e=d3.selectAll(".nv-bar")[0];e.forEach(function(e,a){var r=e.getBBox();d3.select(t[a]).attr("dy",r.height/2+6)})}function o(t){return"rgba("+l[t][500].value[0]+","+l[t][500].value[1]+","+l[t][500].value[2]+","+(l[t][500].value[3]||1)+")"}function s(t,e){var a=0,l=r(function(){a<=e?(t(),a++):r.cancel(l)},200)}function c(){console.log("colors",h),i.data.forEach(function(t,e){t.color=o(h[e])})}var i=this,u=null,d=null,p=_.debounce(n,150),h=_.map(l,function(t,e){return e});console.log("colors",h),i.data=i.series||[],(i.series||[]).length>h.length&&(i.data=i.series.slice(0,9)),c(),i.legend=i.data[0].values,d3.scale.paletteColors=function(){return d3.scale.ordinal().range(h.map(o))},e.$watch("barChart.series",function(t){i.data=t||[],c(),u&&(d.datum(i.data).call(u),u.update(),s(u.update,10))}),nv.addGraph(function(){return u=nv.models.discreteBarChart().margin({top:10,right:0,bottom:10,left:0}).x(function(t){return t.label}).y(function(t){return t.value}).showValues(!0).showXAxis(!1).showYAxis(!1).valueFormat(d3.format("d")).color(d3.scale.paletteColors().range()),u.tooltip.enabled(!1),u.noData("There are no readings for this moment..."),d=d3.select(t.get(0)).select(".bar-chart svg").datum(i.data).call(u),nv.utils.windowResize(u.update),s(u.update,10),u},function(){u.dispatch.on("beforeUpdate",function(){a(p,100)}),a(p,100)})}]}}angular.module("pipStaticCharts",[]).directive("pipBarChart",t)}();