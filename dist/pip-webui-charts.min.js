!function(t){"use strict";t.module("pipCharts",["pipStaticCharts"])}(window.angular),function(t){try{t=angular.module("pipCharts.Templates")}catch(a){t=angular.module("pipCharts.Templates",[])}t.run(["$templateCache",function(t){t.put("bar/bar_chart.html",'<div class="bar-chart flex-auto layout-column"><svg class="flex-auto"></svg></div><div class="static-chart-legend"><div class="legend-title" ng-repeat="item in barChart.legend"><span class="bullet" ng-style="{\'background-color\': item.color}"></span> <span>{{:: item.label}}</span></div></div>')}])}(),function(){"use strict";function t(){return{restrict:"E",scope:{series:"=pipSeries"},bindToController:!0,controllerAs:"barChart",templateUrl:"bar/bar_chart.html",controller:["$element","$scope","$timeout","$interval","$mdColorPalette",function(t,a,e,l,n){function r(){var t=d3.selectAll(".nv-bar text")[0],a=d3.selectAll(".nv-bar")[0];a.forEach(function(a,e){var l=a.getBBox();d3.select(t[e]).attr("dy",l.height/2+6)})}function o(t){return"rgba("+n[t][500].value[0]+","+n[t][500].value[1]+","+n[t][500].value[2]+","+(n[t][500].value[3]||1)+")"}function c(t,a){var e=0,n=l(function(){e<=a?(t(),e++):l.cancel(n)},200)}function s(){i.data.forEach(function(t,a){t.color=o(h[a])})}var i=this,u=null,d=null,p=_.debounce(r,150),h=_.map(n,function(t,a){return a});console.log("colors",h),i.data=i.series||[],(i.series||[]).length>h.length&&(i.data=i.series.slice(0,9)),s(),console.log("vm.data",i.data),i.legend=i.data,d3.scale.paletteColors=function(){return d3.scale.ordinal().range(h.map(o))},a.$watch("barChart.series",function(t){i.data=t||[],s(),u&&(d.datum(i.data).call(u),u.update(),c(u.update,10))}),nv.addGraph(function(){return console.log("here"),u=nv.models.discreteBarChart().margin({top:10,right:0,bottom:30,left:0}).x(function(t){return t.label}).y(function(t){return t.value}).showValues(!0).showXAxis(!0).showYAxis(!1).valueFormat(d3.format("d")).color(d3.scale.paletteColors().range()),u.tooltip.enabled(!1),u.noData("No data for this moment..."),d=d3.select(t.get(0)).select(".bar-chart svg").datum(i.data).call(u),nv.utils.windowResize(u.update),c(u.update,10),u},function(){u.dispatch.on("beforeUpdate",function(){e(p,100)}),e(p,100)})}]}}angular.module("pipStaticCharts",[]).directive("pipBarChart",t)}();